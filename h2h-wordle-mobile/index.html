<!doctype html>
<html lang="ka">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no,viewport-fit=cover" />
  <title data-i18n="appName">рЃАрЃўрЃбрЃДрЃЋрЃБрЃарЃў</title>
  <meta name="theme-color" content="#0f1220" />
  <link rel="icon" type="image/png" href="icon.png" />
  <link rel="manifest" href="manifest.json" />
  <link rel="apple-touch-icon" href="icon.png" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="apple-mobile-web-app-title" content="PVP рЃАрЃўрЃбрЃДрЃЋрЃБрЃарЃў" />
  <link rel="stylesheet" href="singleplayer.css" />
</head>
<body>
  <!-- AD PLACEHOLDER TOP (hidden by default) -->
  <div class="ad-placeholder ad-top" id="adTop" style="display: none;">
    <span data-i18n="advertisement">рЃарЃћрЃЎрЃџрЃљрЃЏрЃљ</span>
  </div>

  <!-- MODE SELECTOR SCREEN -->
  <div class="modeSelector" id="modeSelector">
    <div class="modeCard">
      <!-- LANGUAGE SWITCHER -->
      <div class="languageSwitcher">
        <button class="langBtn active" id="langKa" data-lang="ka">­ЪЄг­ЪЄф рЃЦрЃљрЃарЃЌрЃБрЃџрЃў</button>
        <button class="langBtn" id="langEn" data-lang="en">­ЪЄг­ЪЄД English</button>
      </div>

      <div class="logo">
        <div class="logoDot"></div>
        <h1 data-i18n="appName">рЃАрЃўрЃбрЃДрЃЋрЃБрЃарЃў</h1>
      </div>
      
      <div class="subtitle" data-i18n="chooseMode">рЃљрЃўрЃарЃЕрЃўрЃћ рЃЌрЃљрЃЏрЃљрЃерЃўрЃА рЃАрЃбрЃўрЃџрЃў</div>
      
      <div class="modeButtons">
        <button class="modeBtn daily" id="dailyModeBtn">
          <div class="modeIcon">­ЪЊЁ</div>
          <div class="modeTitle" data-i18n="dailyChallenge">рЃЊрЃдрЃўрЃА рЃАрЃўрЃбрЃДрЃЋрЃљ</div>
          <div class="modeDesc" data-i18n="dailyChallengeDesc">рЃћрЃарЃЌрЃў рЃЌрЃљрЃЏрЃљрЃерЃў рЃЊрЃдрЃћрЃерЃў</div>
        </button>
        
        <button class="modeBtn endless" id="endlessModeBtn">
          <div class="modeIcon">РЎЙ№ИЈ</div>
          <div class="modeTitle" data-i18n="endlessPractice">рЃБрЃАрЃљрЃАрЃарЃБрЃџрЃЮ рЃАрЃўрЃбрЃДрЃЋрЃћрЃЉрЃў</div>
          <div class="modeDesc" data-i18n="endlessPracticeDesc">рЃерЃћрЃБрЃќрЃдрЃБрЃЊрЃљрЃЋрЃў рЃЌрЃљрЃЏрЃљрЃерЃў</div>
        </button>
        
        <button class="modeBtn pvp" id="pvpModeBtn">
          <div class="modeIcon">Рџћ№ИЈ</div>
          <div class="modeTitle" data-i18n="onlinePVP">рЃЮрЃюрЃџрЃљрЃўрЃю рЃЌрЃљрЃЏрЃљрЃерЃў PVP</div>
          <div class="modeDesc" data-i18n="onlinePVPDesc">рЃърЃўрЃарЃЊрЃљрЃърЃўрЃарЃў рЃЏрЃЮрЃгрЃўрЃюрЃљрЃљрЃдрЃЏрЃЊрЃћрЃњрЃћ</div>
        </button>

        <!-- NEW: Quick Match Public Room -->
        <button class="modeBtn quickmatch" id="quickMatchBtn">
          <div class="modeIcon">­Ъј»</div>
          <div class="modeTitle" data-i18n="quickMatch">рЃАрЃгрЃарЃљрЃцрЃў рЃЌрЃљрЃЏрЃљрЃерЃў</div>
          <div class="modeDesc" data-i18n="quickMatchDesc">рЃАрЃљрЃ»рЃљрЃарЃЮ рЃЮрЃЌрЃљрЃ«рЃћрЃЉрЃў</div>
        </button>

        <!-- NEW: Browse Public Rooms -->
        <button class="modeBtn browse" id="browseRoomsBtn">
          <div class="modeIcon">­Ъїљ</div>
          <div class="modeTitle" data-i18n="browseRooms">рЃЮрЃЌрЃљрЃ«рЃћрЃЉрЃўрЃА рЃФрЃћрЃЉрЃюрЃљ</div>
          <div class="modeDesc" data-i18n="browseRoomsDesc">рЃАрЃљрЃ»рЃљрЃарЃЮ рЃЮрЃЌрЃљрЃ«рЃћрЃЉрЃўрЃА рЃАрЃўрЃљ</div>
        </button>
      </div>
      
      <div class="statsPreview" id="statsPreview">
        <div class="statItem">
          <div class="statValue" id="streakValue">0</div>
          <div class="statLabel" data-i18n="currentStreak">рЃЏрЃўрЃЏрЃЊрЃўрЃюрЃљрЃарЃћ рЃАрЃћрЃарЃўрЃљ</div>
        </div>
        <div class="statItem">
          <div class="statValue" id="winRateValue">0%</div>
          <div class="statLabel" data-i18n="winRate">рЃњрЃљрЃЏрЃљрЃарЃ»рЃЋрЃћрЃЉрЃўрЃА %</div>
        </div>
        <div class="statItem">
          <div class="statValue" id="gamesValue">0</div>
          <div class="statLabel" data-i18n="gamesPlayed">рЃЌрЃљрЃЏрЃљрЃерЃћрЃЉрЃў</div>
        </div>
      </div>

      <!-- AD PLACEHOLDER MIDDLE (hidden by default) -->
      <div class="ad-placeholder ad-middle" id="adMiddle" style="display: none;">
        <span data-i18n="advertisement">рЃарЃћрЃЎрЃџрЃљрЃЏрЃљ</span>
      </div>

      <div class="refreshBanner">
        <button class="refreshBtn" id="refreshBtn" onclick="location.reload()">
          <span class="refreshIcon">­Ъћё</span>
          <span class="refreshText" data-i18n="refreshText">рЃњрЃљрЃюрЃљрЃ«рЃџрЃћ рЃАрЃљрЃБрЃЎрЃћрЃЌрЃћрЃАрЃЮ рЃЌрЃљрЃЏрЃљрЃерЃўрЃАрЃЌрЃЋрЃўрЃА</span>
        </button>
      </div>
    </div>
  </div>

  <!-- GAME SCREEN -->
  <div class="gameScreen" id="gameScreen" style="display:none;">
    <header class="header">
      <button class="backBtn" id="backBtn" data-i18n="back">Рєљ рЃБрЃЎрЃљрЃю</button>
      <div class="headerTitle">
        <span id="gameMode" data-i18n="dailyChallenge">рЃЊрЃдрЃўрЃА рЃњрЃљрЃЏрЃЮрЃгрЃЋрЃћрЃЋрЃљ</span>
        <span id="wordLengthIndicator"></span>
      </div>
      <button class="statsBtn" id="statsBtn">­ЪЊі</button>
    </header>

    <main class="gameContainer">
      <div class="gameInfo">
        <div class="streak" id="streakDisplay">
          ­ЪћЦ <span id="currentStreak">0</span> <span data-i18n="dayStreak">рЃЊрЃдрЃўрЃА рЃАрЃћрЃарЃўрЃљ</span>
        </div>
        <div class="guessCounter">
          <span id="guessesUsed">0</span>/6 <span data-i18n="guesses">рЃЏрЃфрЃЊрЃћрЃџрЃЮрЃЉрЃљ</span>
        </div>
      </div>


      <div class="boardWrapper">
        <div class="board" id="board"></div>
      </div>

      <div class="keyboard" id="keyboard"></div>
    </main>
  </div>

  <!-- LENGTH SELECTOR MODAL (for endless mode) -->
  <div class="modal" id="lengthModal" hidden>
    <div class="modalCard">
      <h2 data-i18n="chooseWordLength">рЃљрЃўрЃарЃЕрЃўрЃћ рЃАрЃўрЃбрЃДрЃЋрЃўрЃА рЃАрЃўрЃњрЃарЃФрЃћ</h2>
      <div class="lengthButtons">
        <button class="lengthBtn" data-length="5">5 <span data-i18n="letters">рЃљрЃАрЃЮ</span></button>
        <button class="lengthBtn" data-length="6">6 <span data-i18n="letters">рЃљрЃАрЃЮ</span></button>
        <button class="lengthBtn" data-length="7">7 <span data-i18n="letters">рЃљрЃАрЃЮ</span></button>
        <button class="lengthBtn" data-length="8">8 <span data-i18n="letters">рЃљрЃАрЃЮ</span></button>
        <button class="lengthBtn" data-length="9">9 <span data-i18n="letters">рЃљрЃАрЃЮ</span></button>
        <button class="lengthBtn" data-length="10">10 <span data-i18n="letters">рЃљрЃАрЃЮ</span></button>
      </div>
    </div>
  </div>

  <!-- PUBLIC ROOMS BROWSER MODAL -->
  <div class="modal" id="roomsBrowserModal" hidden>
    <div class="modalCard roomsBrowserCard">
      <div class="modalHeader">
        <h2 data-i18n="publicRooms">рЃАрЃљрЃ»рЃљрЃарЃЮ рЃЮрЃЌрЃљрЃ«рЃћрЃЉрЃў</h2>
        <button class="closeBtn" id="closeRoomsBtn">РюЋ</button>
      </div>
      
      <div class="roomsList" id="roomsList">
        <div class="roomsLoading" data-i18n="loading">рЃўрЃбрЃЋрЃўрЃарЃЌрЃћрЃЉрЃљ...</div>
      </div>

      <div class="roomsActions">
        <button class="btn" id="refreshRoomsBtn" data-i18n="refresh">­Ъћё рЃњрЃљрЃюрЃљрЃ«рЃџрЃћрЃЉрЃљ</button>
        <button class="btn ghost" id="createPublicRoomBtn" data-i18n="newRoom">+ рЃљрЃ«рЃљрЃџрЃў рЃЮрЃЌрЃљрЃ«рЃў</button>
      </div>
    </div>
  </div>

  <!-- STATS MODAL -->
  <div class="modal" id="statsModal" hidden>
    <div class="modalCard statsCard">
      <div class="modalHeader">
        <h2 data-i18n="statistics">рЃАрЃбрЃљрЃбрЃўрЃАрЃбрЃўрЃЎрЃљ</h2>
        <button class="closeBtn" id="closeStatsBtn" data-i18n="close">РюЋ</button>
      </div>
      
      <div class="statsGrid">
        <div class="statBox">
          <div class="statBig" id="totalGamesStats">0</div>
          <div class="statSmall" data-i18n="played">рЃЌрЃљрЃЏрЃљрЃерЃў</div>
        </div>
        <div class="statBox">
          <div class="statBig" id="winPercentStats">0</div>
          <div class="statSmall" data-i18n="winPercent">рЃњрЃљрЃЏрЃљрЃарЃ»рЃЋ. %</div>
        </div>
        <div class="statBox">
          <div class="statBig" id="currentStreakStats">0</div>
          <div class="statSmall" data-i18n="currentStreak">рЃЏрЃўрЃЏрЃЊрЃўрЃюрЃљрЃарЃћ рЃАрЃћрЃарЃўрЃљ</div>
        </div>
        <div class="statBox">
          <div class="statBig" id="maxStreakStats">0</div>
          <div class="statSmall" data-i18n="maxStreak">рЃЏрЃљрЃЦрЃА. рЃАрЃћрЃарЃўрЃљ</div>
        </div>
      </div>

      <div class="guessDistribution" id="guessDistribution"></div>

      <button class="resetBtn" id="resetStatsBtn" data-i18n="resetStats">рЃАрЃбрЃљрЃбрЃўрЃАрЃбрЃўрЃЎрЃўрЃА рЃњрЃљрЃЊрЃљрЃбрЃЋрЃўрЃарЃЌрЃЋрЃљ</button>
    </div>
  </div>

  <!-- WIN MODAL (with definition) -->
  <div class="modal" id="winModal" hidden>
    <div class="modalCard winCard">
      <div class="winHeader">
        <div class="winEmoji">­ЪјЅ</div>
        <h2 id="winTitle" data-i18n="youWon">рЃЏрЃЮрЃўрЃњрЃћ!</h2>
      </div>
      
      <div class="winStats">
        <div class="winStatItem">
          <span class="winStatLabel" data-i18n="guesses">рЃЏрЃфрЃЊрЃћрЃџрЃЮрЃЉрЃћрЃЉрЃў:</span>
          <span class="winStatValue" id="winGuesses">-</span>
        </div>
        <div class="winStatItem">
          <span class="winStatLabel" data-i18n="currentStreak">рЃАрЃћрЃарЃўрЃљ:</span>
          <span class="winStatValue" id="winStreak">-</span>
        </div>
      </div>

      <div class="wordReveal">
        <div class="wordLabel" data-i18n="theWordWas">рЃАрЃўрЃбрЃДрЃЋрЃљ рЃўрЃДрЃЮ:</div>
        <div class="theWord" id="theWord">рЃАрЃўрЃбрЃДрЃЋрЃљ</div>
      </div>

      <div class="definition" id="definitionBox">
        <div class="defLoading" data-i18n="loadingDefinition">рЃўрЃбрЃЋрЃўрЃарЃЌрЃћрЃЉрЃљ рЃњрЃљрЃюрЃЏрЃљрЃарЃбрЃћрЃЉрЃљ...</div>
      </div>

      <div class="winActions">
        <button class="playAgainBtn" id="playAgainBtn" data-i18n="playAgain">рЃЎрЃўрЃЊрЃћрЃЋ рЃЌрЃљрЃЏрЃљрЃерЃў</button>
        <button class="shareBtn" id="shareBtn" data-i18n="shareResults">рЃњрЃљрЃќрЃўрЃљрЃарЃћрЃЉрЃљ</button>
      </div>
    </div>
  </div>

  <!-- LOSE MODAL -->
  <div class="modal" id="loseModal" hidden>
    <div class="modalCard loseCard">
      <div class="loseHeader">
        <div class="loseEmoji">­Ъўб</div>
        <h2 data-i18n="betterLuck">рЃерЃћрЃю рЃгрЃљрЃљрЃњрЃћ</h2>
      </div>
      
      <div class="wordReveal">
        <div class="wordLabel" data-i18n="theWordWas">рЃАрЃўрЃбрЃДрЃЋрЃљ рЃўрЃДрЃЮ:</div>
        <div class="theWord" id="loseWord">рЃАрЃўрЃбрЃДрЃЋрЃљ</div>
      </div>

      <div class="definition" id="loseDefinitionBox">
        <div class="defLoading" data-i18n="loadingDefinition">рЃўрЃбрЃЋрЃўрЃарЃЌрЃћрЃЉрЃљ рЃњрЃљрЃюрЃЏрЃљрЃарЃбрЃћрЃЉрЃљ...</div>
      </div>

      <div class="loseActions">
        <button class="playAgainBtn" id="losePlayAgainBtn" data-i18n="tryAgain">рЃЌрЃљрЃЋрЃўрЃЊрЃљрЃю рЃфрЃЊрЃљ</button>
      </div>
    </div>
  </div>

  <!-- TOAST NOTIFICATIONS -->
  <div class="toast" id="toast" hidden></div>

  <!-- AD PLACEHOLDER BOTTOM (hidden by default) -->
  <div class="ad-placeholder ad-bottom" id="adBottom" style="display: none;">
    <span data-i18n="advertisement">рЃарЃћрЃЎрЃџрЃљрЃЏрЃљ</span>
  </div>

  <script src="translations.js"></script>
  <script type="module" src="wordlist.js"></script>
  <script type="module" src="singleplayer.js"></script>
  
  <script>
    // Language switcher functionality
    document.addEventListener('DOMContentLoaded', () => {
      const langKa = document.getElementById('langKa');
      const langEn = document.getElementById('langEn');
      
      // Set active language on load
      const currentLang = getCurrentLanguage();
      if (currentLang === 'en') {
        langKa.classList.remove('active');
        langEn.classList.add('active');
      }
      
      // Language switch handlers
      langKa.addEventListener('click', () => {
        setLanguage('ka');
        langKa.classList.add('active');
        langEn.classList.remove('active');
      });
      
      langEn.addEventListener('click', () => {
        setLanguage('en');
        langEn.classList.add('active');
        langKa.classList.remove('active');
      });
      
      // Initial translation
      updateAllTexts();
    });

    // Ad visibility toggle (for testing)
    window.toggleAds = function(show) {
      ['adTop', 'adMiddle', 'adBottom'].forEach(id => {
        const el = document.getElementById(id);
        if (el) el.style.display = show ? 'flex' : 'none';
      });
    };
  </script>
</body>
</html>